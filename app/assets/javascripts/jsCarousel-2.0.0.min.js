(function(e){e.fn.extend({jsCarousel:function(t){var n=e.extend({scrollspeed:1500,delay:5e3,itemstodisplay:5,autoscroll:false,circular:false,masked:true,onthumbnailclick:null,onpause:false,onplay:false,orientation:"h"},t);return this.each(function(){function T(){l=-1;p=parseInt(f/v);if(f%v>0)p++;l=p-1;var t=0;var c=v;var h=false;var d=e("> div",r);e("> div",r).remove();if(n.masked)d.addClass("thumbnail-inactive").hover(function(){e(this).removeClass("thumbnail-inactive").addClass("thumbnail-active")},function(){e(this).removeClass("thumbnail-active").addClass("thumbnail-inactive")});for(var T=0;T<p;T++){if(f>v){t=T*v;c=t+v;if(c>f){t-=c-f;c=t+v;h=true}}else{t=0;c=f}var k=e("<div/>");d.slice(t,c).each(function(t,n){if(!h)k.append(n);else k.append(e(n).clone(true))});k.find("img").click(function(){if(n.onthumbnailclick!=null){n.onthumbnailclick(e(this).attr("src"))}});r.append(k)}if(n.onthumbnailclick!=null)e("> div > div",r).css("cursor","pointer");if(n.onpause==true){u.click(function(){n.autoscroll=false})}if(n.onplay==true){a.click(function(){n.autoscroll=true;o.trigger("click")})}e("> div",r).addClass("hidden");e("> div > div",r).css("display","");if(n.orientation=="v"){g=e("> div:eq("+l+")",r).css("top");if(g=="auto")g="0px";w=r.height();b=r.get(0).offsetHeight;e("> div",r).css("top","-"+w+"px");e("> div:eq("+l+")",r).stop(false,true).animate({top:g},m,function(){x=false})}if(n.orientation=="h"){y=e("> div:eq("+l+")",r).css("left");E=r.width();b=r.get(0).offsetHeight;e("> div",r).css("left","-"+E+"px");e("> div:eq("+l+")",r).stop(false,true).animate({left:0},m,function(){x=false})}e("> div:eq("+l+")",r).addClass("visible").removeClass("hidden");i.mouseenter(function(){if(n.autoscroll)N()}).mouseleave(function(){if(n.autoscroll)C()});if(n.autoscroll)C();o.click(function(){if(!x){S="forward";if(n.circular)if(l<=0)l=p;A()}});s.click(function(){if(!x){S="backward";if(n.circular)if(l>=p-1)l=-1;A()}})}function N(){x=false;clearTimeout(d);i.children().clearQueue();i.children().stop(false,true)}function C(){clearTimeout(d);if(n.autoscroll)d=setTimeout(k,n.delay)}function k(){if(S=="forward"){if(l<=0)l=p}else{if(l>=p-1){l=-1}}A();d=setTimeout(k,n.delay)}function L(e){return e+"px"}function A(){x=true;var t=e(".visible",r);var i=m;if(S=="forward"){l--;if(l>=0){if(n.orientation=="v"){e(">div:eq("+l+")",r).css("top",L(w)).removeClass("hidden").addClass("visible").stop(false,true).animate({top:g},i,function(){x=false});t.stop(false,true).animate({top:"-="+L(w)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("top",g);x=false})}else{e(">div:eq("+l+")",r).css("left",L(E)).removeClass("hidden").addClass("visible").stop(false,true).animate({left:"-="+L(E)},i,function(){x=false});t.stop(false,true).animate({left:"-="+L(E)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("left",y);x=false})}}else l=0}else if(S=="backward"){l++;if(l<p){if(n.orientation=="v"){e(">div:eq("+l+")",r).removeClass("hidden").addClass("visible").css({top:L(-w)}).stop(false,true).animate({top:g},i,function(){x=false});t.stop(false,true).animate({top:"+="+L(w)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("top",L(-w));x=false})}else{e(">div:eq("+l+")",r).removeClass("hidden").addClass("visible").css({left:L(-E)}).stop(false,true).animate({left:"+="+L(E)},i,function(){x=false});t.stop(false,true).animate({left:"+="+L(E)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("left",L(-E));x=false})}}else l=p-1}}var t="horizontal";if(n.orientation=="v")t="vertical";var r=e(this).addClass("jscarousal-contents-"+t+"");var i=e("<div/>").addClass("jscarousal-"+t+"").attr("id",r.attr("id"));var s=e("<div/>").addClass("jscarousal-"+t+"-back");var o=e("<div/>").addClass("jscarousal-"+t+"-forward");var u=e("<div/>").addClass("jcarousel-pause");var a=e("<div/>").addClass("jcarousel-play");r.removeAttr("id");r.before(i);i.append(s);i.append(r);i.append(o);i.append(u);i.append(a);var f=e("> div",r).css("display","none").length;var l=0;var c=0;var h=e("<div/>");var p;var d;var v=n.itemstodisplay;var m=n.scrollspeed;var g;var y;var b;var w;var E;var S="forward";var x=true;T()})}})})(jQuery)